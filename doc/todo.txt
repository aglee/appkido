## Big projects

* Store database on disk so it doesn't have to be reparsed on every launch.
	* Treat anchors as primary way of linking.
	* Look into BeautifulSoup for parsing
* Use Sparkle for updates.
* Overhaul parsing code. Should make it easy to do things like:
	* Omit the page footer when showing a doc that is the very last thing on the page.
	* Extract the method declaration line.

----

## Smaller bugs/UX stuff

* Have tab loop include controls in window and drawer in one big loop.
	* Make sure to capture those articles I found with key view loop advice.
* option to view classes-in-framework hierarchically
* Also: I thought type-to-select worked? broken
* radical idea: implement our own focus ring
* "Find a random item" feature
* Cmd-+/- bad choice for browser columns; have them affect web view instead; maybe use Opt-Cmd-=/- for browser columns.
* search for "toolbar", the *second* matching result is selected
* Add menu under "General" and a hotkey for Header File
* Get rid of the 1, 2, numbering in subtopics (I suspect no one uses them, plus easy to eyeball, plus what if user remaps menu shortcuts?). Make the subtopics list narrower accordingly.
* Get new icons.

* Move AppKiDo to its own Space, open one window with the drawer open, minimize it.  Click an app in a different space, click back on AppKiDo -- the window unminiaturizes, but the drawer only opens part way.
* allow for "wip" to be in the version string
	* also use real build numbers
* maybe header file in contextual menu for all docs
* Still getting double drawing -- just saw it in the doc list after a search for QCComposition.
* tooltip on the Remove Favorite button

----

## Correctness

* "Classes in AppKit" doesn't include NSString
* ApplicationServices -> Types & Constants -> Constants -- "Color Modes" appears twice, as does "Color Constants".
* cell classes are n/a for iPhone (UITableViewCell is actually a view)

----

## Code hygiene

* refactor parsers -- decouple from notion of a file
* use "item-based" NSBrowser delegate methods
* normal NS...Controller for remaining cases
	* AKPrefPanelController
	* AKDevToolsPanelController
	* AKDevToolsPathController
	* AKFindPanelController
* proper CFBundleShortVersionString
* newer singleton pattern
* use unsafe_unretained instead of assign for objects
* take varargs in DIGSLogError_ExitingMethodPrematurely
* rename digitalspokes plist to com.appkido.etc
* [AKDocParser parseToken] treats bytes with high bit set as whitespace; works for now, but may someday have to properly handle charsets and encodings.
* addImplementedProtocol:(AKProtocolNode *)node -- arg should be protocolNode
* Use "API symbol" terminology.

----

## Maybe later

* crashes when service sometimes
* got a random crash right after launch -- possibly after closing a window; stack trace just said sendEvent:
* mysterious exception when hit key like "s" with doc list selected; nothing gets printed and it seems to have no ill effect, but it triggers my exception breakpoint; maybe bug in type-to-select (or deliberately swallowed exception)?
* showWindow: and makeKeyAndOrderFront: both called recalculateKeyViewLoop despite my auto-recalc setting; the docs say the auto-recalc setting is for when views are added
* add crashreporter
* Open in Browser should go to the symbol, not to top of page.
* would be nice to see header file containing functions / globals

* prefs > frameworks space bar doesn't work to toggle selection
* show which OS version deprecated symbols were deprecated in
* Remember scroll position in history.
* Use the stylesheet that comes with the docset.
* Give option to use custom stylesheet.
* easily delete multiple Favorites? or all?
* ocd about "Subclasses must override" language. Also "for internal use".
* service from akd itself sometimes makes new window
* open test parser for a .h file
* clipboard-based enhancements:
	* service for putting multi-line method into clipboard
	* add service to copy method name to clipboard
	* multi-select in doc list and Copy method prototypes
* are those parsing kludges still needed?
* Add progress indicator during search.
* using AKSearchQuery to follow links could be expensive; use "c_ref" etc. to perform targeted lookups
* localize

----

* "canny unvalley" -- having no font panel makes app look like a port or a Java app

----

* re-check small icon retina issue in A4i
* Offer all fonts, not just hand-picked.
* Have tab loop include controls in window and drawer in one big loop.
* Can an alternative to the drawer work in a similar way?

----

* syntax highlighting for header files
* figure out command-line build
* Get rid of Dev Tools concept and just present available SDKs?
* Instead of a separate subtopic for "ALL Instance Methods" etc., put an "ALL" button in the "Instance Methods" subtopic cell?
* web site
	* add tips and tricks page
	* fix HTML validation errors
* show "No Results", "No Classes", etc. in quicklist table when it is empty

----

* service for putting multi-line method into clipboard
	* Submit radar about splitting method calls into multiple lines
* services in separate app
* add error handling to parser API
* add service to copy method name to clipboard
* start saving dSYMs
* hot key to activate
* check whether .h parser handles class extensions
	* _are_ there any extensions I need to parse?
	* I suspect they look just like categories; could add an AKBehaviorNode subclass for class extensions
* search for "::" doesn't find -[CIImageProvider provideImageData:bytesPerRow:origin::size::userInfo:] -- it's because CIImageProvider is not showing up (a QuartzCore informal protocol)
* there exist *Carbon* protocols: IMKTextInput and IMKUnicodeTextInput; and the -insertText: method for the latter is not showing up (not documented, I assume)
* QCComposition -> instance methods -> protocols -> link to "Standard Protocols" opens web page; maybe should appear under General and link can go there within AppKiDo?
* make sure handling errors querying sqlite -- note Tony Cate's problem
* some way to convert between file:// URLs and http:// URLs
	* could drag from doc list into email and get the http:// URL
	* could drag from cocoa-dev message into AppKiDo and navigate to the right doc
* Consider giving AKGlobalsNode an ivar indicating the behavior it's associated with (if any) instead of shoving the behavior name into the AKGlobalsNode name.
* Reconcile use of platform names as parameters with use of APPKIDO_FOR_IPHONE macro -- do I need to do both?
* Why do some searches take so long?  "cursor" is slow, yet "o" is fast even though it returns a superset of results.
	* Possible clue: I think it's the "<<" characters that get drawn in the search results.
* "Inheritance" section now contains other stuff like links to code samples.  Parse and organize better.
* Try removing _kludgeXXX calls one by one.  See if parse results are the same.  Remember to test with Xcode 3.x.
* Add a Bindings subtopic?  (See "Cocoa Bindings Reference".  There's a list of classes that have bindings -- mostly view classes, but not all - and what those bindings are.)
* look for [agl] REMOVE

* Provide some help dealing with the quarantines.

* There's a bunch of methods that fail my heuristic for deciding whether a deprecated method is a class/instance/delegate method.  For example, deserializeAlignedBytesLengthAtCursor: is a deprecated instance method of NSData which is declared in NSSerialization.h -- which is only in the 10.4u SDK, so in 10.5 I won't parse that file and I'll assume that method is a delegate method.  Considered moving all deprecated methods, regardless of type, to a separate subtopic, but that's too many subtopics -- *unless* I put an "ALL" button in subtopic cells for "Instance Methods", "Class Methods", etc.  Hm.

----

* Have the build script create an unstripped version as well.

* Should I be using DWARF?  See dSYM.

* When releasing, bake a build number into the version string.

* Add agvtool to workflow.

* [docSetPlist objectForKey:@"DocSetPlatformVersion"] sometimes returns nil with 3.1.3; handle more gracefully.

* Feature to add your own directory of headers.  Specify a project name (e.g., "AppKiDo") and a directory (e.g., /Users/alee/_Developer/appkido/trunk/src).  Recursively parse all headers, excluding .svn (and build?).  Give those headers special treatment -- include them in the database even though they don't have associated doc files.  Will have to update the parser to recognize @property in headers.  Won't be able to show docs, but can at least read the headers and navigate them.  Add quicklist for "All classes in project X".  Have some way to open selected header (and option to find .m) in tool of your choice -- Xcode or whatever.

* NSExceptionHandler has a "System Hang Constants" section.  Should be able to go to it when click on the link under, e.g., setExceptionHangingMask:.  Similarly for "Logging and Handling Constants" under setExceptionHandlingMask:.

* regarding init failure, noticed on objc-language: <http://lists.apple.com/archives/objc-language/2008/Sep/msg00133.html> "You should first clean up anything you already did in your -init, then call [super dealloc]. [self dealloc] or [self release] are bad because they might call some subclass's -dealloc method even though the subclass's -init hasn't done anything yet."

* regarding init failure, noticed on objc-language: <http://lists.apple.com/archives/objc-language/2008/Sep/msg00133.html> "You should first clean up anything you already did in your -init, then call [super dealloc]. [self dealloc] or [self release] are bad because they might call some subclass's -dealloc method even though the subclass's -init hasn't done anything yet."

----

* Maybe add subtopic for deprecated methods?
* Document the QA process to go through when there's a new doc update or a new SDK version: dump file, do a dump diff, etc.
* Can I be smarter about telling whether a deprecated method is a class or instance method?  Although if it's an instance method, can I tell if it's a delegate method?
* clean up copyrights in source files

* SubEthaEdit search Service only hits Mac OS ("classic") AppKiDo.
* Possible confusion: in AppKit Constants, there's "Cell Types [NSCell]" and "NSCellType [NSCell]"; perhaps no more confusing than the NSCell doc itself -- except they're so far apart in the doc list it may not be clear they're related; maybe should reorg so "Constants" and "Data Types" are separate topics -- this would allow another level of subdivisions.
* If you hide quicklist, move window near left edge of screen, and restore quicklist, the window should be pushed right to make room for the whole quicklist to be visible.
* Would it be possible to include CoreFoundation docs?
* Maybe force-exclude XgridFoundation from frameworks, as with Carbon?
* Add the ability to look things up / do searches in the Xcode doc window.
* I think can stop parsing headers when docset queries fully fleshed out.
* Why sometimes slow to jump to a favorite?
* Look into logging alternatives.
* Make sure parsing class extensions.
* Open a document online instead of locally.  Copy that URL to the pasteboard.
* Search the Examples directory for an example of the method.

----

## Efficiency ##

* parse faster
	* write new pure-C parser, use different strategy; or should I use DOM classes?
	* have list of HTML tags I care about, and attributes within those tags, and in the special case of tags that I designate as "header" tags (h1, h2, etc. but could also include 
	* pluck out byte offsets of where those tags begin and end, and their values for those attributes (in particular, the "name" attribute for anchor tags)
	* output of parsing one file is an ordered list of these byte offsets
	* create a mini-language for querying this list for a range of bytes satisfying some criterion (in particular, the range of bytes containing the documentation for a token that is identified by a given anchor string)

* parse less stuff
	* among HTML files, only need to parse class docs (to get delegate methods and notifications); everything else we can tell from the docset index
	* can we count on the doc file itself to tell us a protocol is informal?  if so, may not need to parse headers

* parse _more_ stuff
	* CoreFoundation?

* parse more correctly -- create better unit tests for detecting when a token is missing (like the NSIndexPath UI Kit Additions Guillaume reported)

* save less stuff in memory
	* query as needed from the docset index and the CoreData storage instead of storing everything in memory

* would startup be noticeably faster if AKDocSetIndex kept the database open all the time instead of opening and closing for each query?

* Speed: try NSUncachedRead or NSMappedRead (search cocoa-dev mailbox for Wil Shipley's suggestion on 2009-01-27).
	* I'm not read-only though, due to the kludgy tweaks of the HTML; but might help for parsing .h files

